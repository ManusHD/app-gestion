<div id="contenedor-nuevo-producto">
    <form #formularioProducto="ngForm" (ngSubmit)="onSubmit()">
        <h1>Nuevo producto</h1>
        <div class="nuevo-input"> 
            <div class="alinear-input">
                <label for="referencia">Referencia:</label>
                <input type="text" id="referencia" name="referencia" [(ngModel)]="producto.referencia"
                (change)="existeRef()" #referenciaInput="ngModel" [pattern]="referenciaPattern" required>
            </div>

            <!-- Mensajes de error -->
            <div *ngIf="referenciaInput.invalid && (referenciaInput.dirty || referenciaInput.touched)"
                class="error-message">
                <small *ngIf="referenciaInput.errors?.['required']">
                    La referencia es obligatoria.
                </small>
                <small *ngIf="referenciaInput.errors?.['pattern']">
                    La referencia debe tener 7 dígitos como máximo o comenzar por R seguido de los dígitos.
                </small>
            </div>
            <small *ngIf="existe" class="error-message">
                Ya existe un producto con esta referencia
            </small>
        </div>

        <div class="nuevo-input">
            <div class="alinear-input">
                <label for="descripcion">Descripción:</label>
                <input type="text" id="descripcion" name="descripcion" [(ngModel)]="producto.description" required
                #descripcionInput="ngModel">
            </div>

            <div *ngIf="descripcionInput.invalid && (descripcionInput.dirty || descripcionInput.touched)"
                class="error-message">
                <small *ngIf="descripcionInput.errors?.['required']">
                    La descripción es obligatoria.
                </small>
            </div>
        </div>

        <button type="submit" [disabled]="!formularioProducto.form.valid">
            Crear
        </button>
    </form>
</div>